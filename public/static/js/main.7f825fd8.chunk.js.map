{"version":3,"sources":["images/header-logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/Form.js","components/PopupWithForm.js","utils/constants.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/api.js","components/Confirm.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","logo","className","href","src","alt","CurrentUserContext","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","_id","owner","type","onClick","link","name","cn","like__btn_active","likes","some","item","title","reduce","res","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","avatar","about","map","Footer","Date","getFullYear","ImagePopup","isOpen","onClose","FormContext","Form","children","onSubmit","validators","defaultValues","useState","formValues","setFormValues","formErrors","setFormErrors","isInvalid","setIsInvalid","onChangeInput","useCallback","value","prevValues","useEffect","allErrors","Object","keys","key","valueByKey","errors","entries","errorKey","validatorFn","acc","fielKey","keyErrors","formContextValue","evt","preventDefault","noValidate","Provider","Field","defaultValue","setValue","onChange","Button","disabled","PopupWithForm","isLoad","submitStates","popup_opened","popup__btn__disabled","loading","static","propsPopupWithAddForm","propsPopupWithEditForm","propsPopupWithEditAvatarForm","propsPopupWithConfirmForm","required","minLength","getErrorMessage","typeOfError","errorMessage","EditProfilePopup","isLoading","onUpdateUser","values","inputProps","find","popup__input_type_error","placeholder","maxLength","target","popup__error_visible","isUrl","test","EditAvatarPopup","onUpdateAvatar","AddPlacePopup","apiObject","baseUrl","headers","this","_baseUrl","_headers","relativePath","method","body","options","fetch","response","json","description","ok","Promise","reject","status","message","_getProxy","_handleResponse","JSON","stringify","id","like","authorization","Confirm","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmOpen","setIsConfirmOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setIsLoading","getCardList","then","data","catch","error","console","log","finally","getUserData","closeAllPopups","importedLogo","isLiked","toggleCardLike","newCard","newCards","addCard","setUserData","setAvatar","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7f825fd8.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/header-logo.ff16f24b.svg\";","export default function Header({ logo }) {\n  return (\n    <header className=\"header\">\n      <a href=\"#0\">\n        <img src={logo} alt=\"Логотип страницы Место.\" className=\"header__logo\" />\n      </a>\n    </header>\n  );\n}\n","import { createContext } from 'react';\r\n\r\nexport const CurrentUserContext = createContext();\r\n","import { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { useContext } from 'react';\r\nimport cn from 'classnames';\r\n\r\nexport default function Card({ card, onCardClick, onCardLike, onCardDelete }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const handleClick = () => {\r\n    onCardClick(card);\r\n  };\r\n\r\n  const handleClickLike = () => {\r\n    onCardLike(card);\r\n  };\r\n\r\n  const handleClickDelete = () => {\r\n    onCardDelete(card);\r\n  };\r\n\r\n  return (\r\n    <li className=\"card\">\r\n      {currentUser._id === card.owner._id && (\r\n        <button className=\"card__btn card__btn_action_trush\" type=\"button\" onClick={handleClickDelete}></button>\r\n      )}\r\n\r\n      <img src={card.link} alt={card.name} className=\"card__image\" onClick={handleClick} />\r\n      <div className=\"card__footer\">\r\n        <h3 className=\"card__caption\">{card.name}</h3>\r\n        <div className=\"like card__like\">\r\n          <button\r\n            className={cn('like__btn', { like__btn_active: card.likes.some((item) => item._id === currentUser._id) })}\r\n            onClick={handleClickLike}\r\n            type=\"button\"\r\n          ></button>\r\n          <p className=\"like__count\" title={card.likes.reduce((res, item) => (res += `${item.name}\\n`), '')}>\r\n            {card.likes.length}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n","import { useContext } from 'react';\r\nimport Card from './Card';\r\n\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nexport default function Main({\r\n  onEditAvatar,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  cards,\r\n  onCardClick,\r\n  onCardLike,\r\n  onCardDelete,\r\n}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <button className=\"profile__btn profile__btn_action_edit-avatar\" onClick={onEditAvatar}>\r\n          <img src={currentUser.avatar} alt=\"Аватар.\" className=\"profile__avatar\" />\r\n          <span className=\"profile__avatar-overlay\"></span>\r\n        </button>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n          <button className=\"profile__btn profile__btn_action_edit\" type=\"button\" onClick={onEditProfile}></button>\r\n          <p className=\"profile__about\">{currentUser.about}</p>\r\n        </div>\r\n        <button className=\"profile__btn profile__btn_action_add\" type=\"button\" onClick={onAddPlace}></button>\r\n      </section>\r\n      <section>\r\n        <ul className=\"cards\">\r\n          {cards.map((item) => {\r\n            return (\r\n              <Card\r\n                card={item}\r\n                onCardClick={onCardClick}\r\n                onCardLike={onCardLike}\r\n                onCardDelete={onCardDelete}\r\n                key={item._id}\r\n              />\r\n            );\r\n          })}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","export default function Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">@ {new Date().getFullYear()} Попов Алексей</p>\n    </footer>\n  );\n}\n","export default function ImagePopup({ card, isOpen, onClose }) {\n  return (\n    <div className={`popup popup_type_show ${isOpen ? 'popup_opened' : ''}`}>\n      <div className=\"popup__container popup__container_type_show\">\n        <button className=\"popup__btn popup__btn_action_close\" type=\"button\" onClick={onClose}></button>\n        <img src={card.link} alt={card.name} className=\"popup__image\" />\n        <h3 className=\"popup__caption\">{card.name}</h3>\n      </div>\n    </div>\n  );\n}\n","import { useState, useCallback, createContext, useContext, useEffect } from 'react';\r\n\r\n//Создаем контекст для вложенных компонентов формы\r\nconst FormContext = createContext({});\r\n\r\n//Компоненты формы\r\nexport function Form({ children, className, onSubmit, validators, defaultValues = {} }) {\r\n  //Стейт всех значений формы\r\n  const [formValues, setFormValues] = useState({});\r\n  //Стейт всех ошибок формы\r\n  const [formErrors, setFormErrors] = useState({});\r\n  //Создаем общий стейт для формы для включения/отключения submit\r\n  const [isInvalid, setIsInvalid] = useState(true);\r\n\r\n  //Создание колбэка на изменение любого поля формы. Используется useCallback,\r\n  //так как при вызове колбэка с использованием эфекта в другом компоненте требуется\r\n  //установить данный колбэк в зависимости, и при перересовке изменяется ссылка на\r\n  //колбэк и снова вызвается тот эфект, из за чего возникает зацикливание.\r\n  const onChangeInput = useCallback((name, value) => {\r\n    //Обновляем стейт всех значений формы\r\n    setFormValues((prevValues) => ({ ...prevValues, [name]: value }));\r\n  }, []);\r\n\r\n  //Обработчик submit\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    onSubmit(formValues);\r\n  };\r\n\r\n  //Вызываем валидацию на каждый ввод в форму\r\n  useEffect(() => {\r\n    //Получаем все ключи\r\n    const formKeys = Object.keys(formValues);\r\n\r\n    //Проверяем валидацию всех значений формы\r\n    const allErrors = formKeys\r\n      .map((key) => {\r\n        const valueByKey = formValues[key];\r\n        if (!validators[key]) {\r\n          return {};\r\n        }\r\n        const errors = Object.entries(validators[key])\r\n          .map(([errorKey, validatorFn]) => {\r\n            return { [errorKey]: validatorFn(valueByKey) };\r\n          })\r\n          .reduce((acc, item) => ({ ...acc, ...item }), {});\r\n        return { [key]: errors };\r\n      })\r\n      .reduce((acc, item) => ({ ...acc, ...item }), {});\r\n\r\n    //Устанавливаем стейт всех ошибок формы\r\n    setFormErrors(allErrors);\r\n  }, [formValues, setFormErrors, validators]);\r\n\r\n  //Определение общей валидности формы\r\n  useEffect(() => {\r\n    for (const fielKey in formErrors) {\r\n      const keyErrors = formErrors[fielKey];\r\n      for (const errorKey in keyErrors) {\r\n        if (keyErrors[errorKey] === true) {\r\n          return setIsInvalid(true);\r\n        }\r\n      }\r\n    }\r\n    setIsInvalid(false);\r\n  }, [formErrors, setIsInvalid]);\r\n\r\n  //Заполняем контекст формы\r\n  const formContextValue = { onChangeInput, isInvalid, formErrors, defaultValues };\r\n\r\n  return (\r\n    <form className={className} onSubmit={handleSubmit} noValidate>\r\n      <FormContext.Provider value={formContextValue}>{children}</FormContext.Provider>\r\n    </form>\r\n  );\r\n}\r\n\r\n//Компонент поля формы\r\nexport function Field({ children, name }) {\r\n  //Получаем значения контекста формы\r\n  const { onChangeInput, formErrors, defaultValues } = useContext(FormContext);\r\n\r\n  const defaultValue = !!defaultValues[name] ? defaultValues[name] : '';\r\n\r\n  //Определяем стейт значения поля\r\n  const [value, setValue] = useState(defaultValue);\r\n\r\n  useEffect(() => {\r\n    setValue(defaultValue);\r\n  }, [defaultValue]);\r\n\r\n  //Установка значения в значения формы\r\n  useEffect(() => {\r\n    onChangeInput(name, value);\r\n  }, [name, value, onChangeInput]);\r\n\r\n  return children({\r\n    name,\r\n    value,\r\n    onChange: setValue,\r\n    errors: formErrors[name],\r\n  });\r\n}\r\n\r\n//Компонент кнопки формы\r\nexport function Button({ children }) {\r\n  //Получаем значение валидности кнопки из формы\r\n  const { isInvalid } = useContext(FormContext);\r\n  return children({ disabled: isInvalid });\r\n}\r\n","import cn from 'classnames';\r\nimport { Form, Button } from './Form';\r\n\r\nexport default function PopupWithForm({\r\n  title,\r\n  name,\r\n  isOpen,\r\n  isLoad,\r\n  submitStates,\r\n  validators,\r\n  onClose,\r\n  onSubmit,\r\n  children,\r\n  defaultValues,\r\n}) {\r\n  return (\r\n    <div className={cn(`popup popup_type_${name}`, { popup_opened: isOpen })} name={name}>\r\n      <Form\r\n        className=\"popup__container popup__container_type_form\"\r\n        name=\"container\"\r\n        onSubmit={onSubmit}\r\n        validators={validators}\r\n        defaultValues={defaultValues}\r\n      >\r\n        <button\r\n          className=\"popup__btn popup__btn_action_close\"\r\n          type=\"button\"\r\n          onClick={onClose}\r\n        ></button>\r\n        <h2 className=\"popup__title\">{title}</h2>\r\n        {children}\r\n        <Button>\r\n          {({ disabled }) => (\r\n            <button\r\n              className={cn('popup__btn', 'popup__btn_action_submit', {\r\n                popup__btn__disabled: disabled,\r\n              })}\r\n              type=\"submit\"\r\n              disabled={disabled}\r\n            >\r\n              {!isLoad ? submitStates.static : submitStates.loading}\r\n            </button>\r\n          )}\r\n        </Button>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n","export const propsPopupWithAddForm = {\n  title: 'Новое место',\n  name: 'add',\n  submitStates: {\n    static: 'Создать',\n    loading: 'Создание...',\n  },\n};\nexport const propsPopupWithEditForm = {\n  title: 'Редактировать профиль',\n  name: 'edit',\n  submitStates: {\n    static: 'Сохранить',\n    loading: 'Сохранение...',\n  },\n};\nexport const propsPopupWithEditAvatarForm = {\n  title: 'Обновить аватар',\n  name: 'edit-avatar',\n  submitStates: {\n    static: 'Сохранить',\n    loading: 'Сохранение...',\n  },\n};\nexport const propsPopupWithConfirmForm = {\n  title: 'Вы уверены?',\n  name: 'confirm',\n  submitStates: {\n    static: 'Да',\n    loading: 'Удаление...',\n  },\n};\n\nexport const validationSettings = {\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__btn_action_submit',\n  inactiveButtonClass: 'popup__btn__disabled',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible',\n};\n\nexport const apiSettings = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-16',\n  headers: {\n    authorization: 'fcd9a632-5cad-436c-b58e-4c80d498006a',\n    'Content-Type': 'application/json',\n  },\n};\n","import { useContext } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { propsPopupWithEditForm } from '../utils/constants.js';\r\nimport cn from 'classnames';\r\nimport { Field } from './Form';\r\n\r\nconst validators = {\r\n  name: {\r\n    required: (value) => {\r\n      return value === '';\r\n    },\r\n    minLength: (value) => {\r\n      return value.length < 2;\r\n    },\r\n  },\r\n  about: {\r\n    required: (value) => {\r\n      return value === '';\r\n    },\r\n    minLength: (value) => {\r\n      return value.length < 2;\r\n    },\r\n  },\r\n};\r\n\r\nconst getErrorMessage = (typeOfError, value = '') => {\r\n  let errorMessage = '';\r\n  switch (typeOfError) {\r\n    case 'required':\r\n      errorMessage = 'Вы пропустили это поле.';\r\n      break;\r\n    case 'minLength':\r\n      errorMessage = `Минимальное количество символов: 2. Длина текста сейчас: ${value.length} символ.`;\r\n      break;\r\n    default:\r\n      errorMessage = '';\r\n  }\r\n  return errorMessage;\r\n};\r\n\r\nexport default function EditProfilePopup({ isOpen, isLoading, onClose, onUpdateUser }) {\r\n  const handleSubmit = (values) => {\r\n    onUpdateUser(values);\r\n  };\r\n\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={propsPopupWithEditForm.title}\r\n      name={propsPopupWithEditForm.name}\r\n      isOpen={isOpen}\r\n      isLoad={isLoading}\r\n      submitStates={propsPopupWithEditForm.submitStates}\r\n      validators={validators}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      defaultValues={currentUser}\r\n    >\r\n      <Field name=\"name\">\r\n        {({ onChange, value, errors, ...inputProps }) => {\r\n          const typeOfError =\r\n            (!!errors && Object.keys(errors).find((key) => errors[key] === true)) || '';\r\n          const errorMessage = getErrorMessage(typeOfError, value);\r\n          return (\r\n            <>\r\n              <input\r\n                type=\"text\"\r\n                className={cn('popup__input popup__input_type_name', {\r\n                  popup__input_type_error: errorMessage.length,\r\n                })}\r\n                placeholder=\"Заголовок профиля\"\r\n                maxLength=\"40\"\r\n                onChange={(evt) => onChange(evt.target.value)}\r\n                value={value}\r\n                {...inputProps}\r\n              />\r\n              <span className={cn('popup__error', { popup__error_visible: errorMessage.length })}>\r\n                {errorMessage}\r\n              </span>\r\n            </>\r\n          );\r\n        }}\r\n      </Field>\r\n      <Field name=\"about\">\r\n        {({ onChange, errors, ...inputProps }) => {\r\n          const typeOfError =\r\n            (!!errors && Object.keys(errors).find((key) => errors[key] === true)) || '';\r\n          const errorMessage = getErrorMessage(typeOfError);\r\n\r\n          return (\r\n            <>\r\n              <input\r\n                type=\"text\"\r\n                className={cn('popup__input popup__input_type_about', {\r\n                  popup__input_type_error: errorMessage.length,\r\n                })}\r\n                placeholder=\"Описание профиля\"\r\n                maxLength=\"200\"\r\n                onChange={(evt) => onChange(evt.target.value)}\r\n                {...inputProps}\r\n              />\r\n              <span className={cn('popup__error', { popup__error_visible: errorMessage.length })}>\r\n                {errorMessage}\r\n              </span>\r\n            </>\r\n          );\r\n        }}\r\n      </Field>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import PopupWithForm from './PopupWithForm';\r\nimport { propsPopupWithEditAvatarForm } from '../utils/constants.js';\r\nimport { Field } from './Form';\r\nimport cn from 'classnames';\r\n\r\nconst validators = {\r\n  link: {\r\n    required: (value) => {\r\n      return value === '';\r\n    },\r\n    isUrl: (value) => {\r\n      return !/http(s?):\\/\\/[-\\w\\.]{3,}\\.[A-Za-z]{2,3}/.test(value);\r\n    },\r\n  },\r\n};\r\n\r\nconst getErrorMessage = (typeOfError, value = '') => {\r\n  let errorMessage = '';\r\n  switch (typeOfError) {\r\n    case 'required':\r\n      errorMessage = 'Вы пропустили это поле.';\r\n      break;\r\n    case 'isUrl':\r\n      errorMessage = `Введите адрес сайта.`;\r\n      break;\r\n    default:\r\n      errorMessage = '';\r\n  }\r\n  return errorMessage;\r\n};\r\n\r\nexport default function EditAvatarPopup({ isOpen, isLoading, onClose, onUpdateAvatar }) {\r\n  const handleSubmit = (values) => {\r\n    onUpdateAvatar(values);\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={propsPopupWithEditAvatarForm.title}\r\n      name={propsPopupWithEditAvatarForm.name}\r\n      isLoad={isLoading}\r\n      isOpen={isOpen}\r\n      submitStates={propsPopupWithEditAvatarForm.submitStates}\r\n      validators={validators}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <Field name=\"link\">\r\n        {({ onChange, errors, ...inputProps }) => {\r\n          const typeOfError =\r\n            (!!errors && Object.keys(errors).find((key) => errors[key] === true)) || '';\r\n          const errorMessage = getErrorMessage(typeOfError);\r\n\r\n          return (\r\n            <>\r\n              <input\r\n                type=\"url\"\r\n                className={cn('popup__input popup__input_type_link', {\r\n                  popup__input_type_error: errorMessage.length,\r\n                })}\r\n                placeholder=\"Ссылка на картинку\"\r\n                onChange={(evt) => onChange(evt.target.value)}\r\n                {...inputProps}\r\n              />\r\n              <span className={cn('popup__error', { popup__error_visible: errorMessage.length })}>\r\n                {errorMessage}\r\n              </span>\r\n            </>\r\n          );\r\n        }}\r\n      </Field>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import PopupWithForm from './PopupWithForm';\r\nimport cn from 'classnames';\r\nimport { propsPopupWithAddForm } from '../utils/constants.js';\r\nimport { Field } from './Form';\r\n\r\nconst validators = {\r\n  name: {\r\n    required: (value) => {\r\n      return value === '';\r\n    },\r\n    minLength: (value) => {\r\n      return value.length < 2;\r\n    },\r\n  },\r\n  link: {\r\n    required: (value) => {\r\n      return value === '';\r\n    },\r\n    isUrl: (value) => {\r\n      return !/http(s?):\\/\\/[-\\w\\.]{3,}\\.[A-Za-z]{2,3}/.test(value);\r\n    },\r\n  },\r\n};\r\n\r\nconst getErrorMessage = (typeOfError, value = '') => {\r\n  let errorMessage = '';\r\n  switch (typeOfError) {\r\n    case 'required':\r\n      errorMessage = 'Вы пропустили это поле.';\r\n      break;\r\n    case 'minLength':\r\n      errorMessage = `Минимальное количество символов: 2. Длина текста сейчас: ${value.length} символ.`;\r\n      break;\r\n    case 'isUrl':\r\n      errorMessage = `Введите адрес сайта.`;\r\n      break;\r\n    default:\r\n      errorMessage = '';\r\n  }\r\n  return errorMessage;\r\n};\r\n\r\nexport default function AddPlacePopup({ isOpen, isLoading, onClose, onAddPlace }) {\r\n  const handleSubmit = (values) => {\r\n    onAddPlace(values);\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={propsPopupWithAddForm.title}\r\n      name={propsPopupWithAddForm.name}\r\n      isLoad={isLoading}\r\n      isOpen={isOpen}\r\n      submitStates={propsPopupWithAddForm.submitStates}\r\n      validators={validators}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <Field name=\"name\">\r\n        {({ onChange, value, errors, ...inputProps }) => {\r\n          const typeOfError =\r\n            (!!errors && Object.keys(errors).find((key) => errors[key] === true)) || '';\r\n          const errorMessage = getErrorMessage(typeOfError, value);\r\n\r\n          return (\r\n            <>\r\n              <input\r\n                type=\"text\"\r\n                className={cn('popup__input popup__input_type_name', {\r\n                  popup__input_type_error: errorMessage.length,\r\n                })}\r\n                placeholder=\"Название\"\r\n                maxLength=\"30\"\r\n                onChange={(evt) => onChange(evt.target.value)}\r\n                value={value}\r\n                {...inputProps}\r\n              />\r\n              <span className={cn('popup__error', { popup__error_visible: errorMessage.length })}>\r\n                {errorMessage}\r\n              </span>\r\n            </>\r\n          );\r\n        }}\r\n      </Field>\r\n      <Field name=\"link\">\r\n        {({ onChange, errors, ...inputProps }) => {\r\n          const typeOfError =\r\n            (!!errors && Object.keys(errors).find((key) => errors[key] === true)) || '';\r\n          const errorMessage = getErrorMessage(typeOfError);\r\n\r\n          return (\r\n            <>\r\n              <input\r\n                type=\"url\"\r\n                className={cn('popup__input popup__input_type_link', {\r\n                  popup__input_type_error: errorMessage.length,\r\n                })}\r\n                placeholder=\"Ссылка на картинку\"\r\n                onChange={(evt) => onChange(evt.target.value)}\r\n                {...inputProps}\r\n              />\r\n              <span className={cn('popup__error', { popup__error_visible: errorMessage.length })}>\r\n                {errorMessage}\r\n              </span>\r\n            </>\r\n          );\r\n        }}\r\n      </Field>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import { apiSettings } from './constants.js';\r\n\r\nclass Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  _getProxy(relativePath, method, body = '') {\r\n    const options = {\r\n      method,\r\n      headers: this._headers,\r\n    };\r\n\r\n    if (!!body) {\r\n      options.body = body;\r\n    }\r\n\r\n    return fetch(`${this._baseUrl}${relativePath}`, options);\r\n  }\r\n\r\n  async _handleResponse(response) {\r\n    const description = await response.json();\r\n\r\n    if (response.ok) {\r\n      return description;\r\n    } else {\r\n      return Promise.reject(`Ошибка: ${response.status}\\nОписание: ${description.message}`);\r\n    }\r\n  }\r\n\r\n  async getUserData() {\r\n    const response = await this._getProxy('/users/me', 'GET');\r\n    return await this._handleResponse(response);\r\n  }\r\n\r\n  async setUserData({ name, about }) {\r\n    const response = await this._getProxy('/users/me', 'PATCH', JSON.stringify({ name, about }));\r\n    return await this._handleResponse(response);\r\n  }\r\n\r\n  async setAvatar({ link }) {\r\n    const response = await this._getProxy('/users/me/avatar', 'PATCH', JSON.stringify({ avatar: link }));\r\n    return await this._handleResponse(response);\r\n  }\r\n\r\n  async getCardList() {\r\n    const response = await this._getProxy('/cards', 'GET');\r\n    return await this._handleResponse(response);\r\n  }\r\n\r\n  async addCard({ name, link }) {\r\n    const response = await this._getProxy('/cards', 'POST', JSON.stringify({ name, link }));\r\n    return await this._handleResponse(response);\r\n  }\r\n\r\n  async deleteCard(id) {\r\n    const response = await this._getProxy(`/cards/${id}`, 'DELETE');\r\n    return await this._handleResponse(response);\r\n  }\r\n\r\n  async toggleCardLike(id, like) {\r\n    const response = await this._getProxy(`/cards/likes/${id}`, like ? 'PUT' : 'DELETE');\r\n    return await this._handleResponse(response);\r\n  }\r\n}\r\n\r\nexport const apiObject = new Api(apiSettings);\r\n","import PopupWithForm from './PopupWithForm';\r\nimport { propsPopupWithConfirmForm } from '../utils/constants.js';\r\n\r\nexport default function Confirm({ isOpen, isLoading, onClose, onSubmit }) {\r\n  const handleSubmit = (evt) => {\r\n    onSubmit();\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      title={propsPopupWithConfirmForm.title}\r\n      name={propsPopupWithConfirmForm.name}\r\n      submitStates={propsPopupWithConfirmForm.submitStates}\r\n      isOpen={isOpen}\r\n      isLoad={isLoading}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n    />\r\n  );\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport importedLogo from '../images/header-logo.svg';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport { apiObject } from '../utils/api.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport Confirm from './Confirm';\r\n\r\nfunction App() {\r\n  //Создаем стейты\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isConfirmOpen, setIsConfirmOpen] = useState(false);\r\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState({});\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  //Загружаем данные карточек один раз при сборке\r\n  useEffect(() => {\r\n    // setIsLoading(!isLoading);\r\n    apiObject\r\n      .getCardList()\r\n      .then((data) => {\r\n        setCards(data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      })\r\n      .finally(() => {\r\n        // setIsLoading(!isLoading);\r\n      });\r\n  }, []);\r\n\r\n  //Загружаем данные пользователя\r\n  useEffect(() => {\r\n    // setIsLoading(!isLoading);\r\n    apiObject\r\n      .getUserData()\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n      })\r\n      .catch(console.log)\r\n      .finally(() => {\r\n        // setIsLoading(!isLoading);\r\n      });\r\n  }, []);\r\n\r\n  //Обработчик нажатия на аватарку\r\n  const handleEditAvatarClick = () => {\r\n    //Открываем попап редактирования аватара\r\n    setIsEditAvatarPopupOpen(true);\r\n  };\r\n\r\n  //Обработчик нажатия на кнопку редактирования профиля\r\n  const handleEditProfileClick = () => {\r\n    //Открываем попап редактирования профиля\r\n    setIsEditProfilePopupOpen(true);\r\n  };\r\n\r\n  //Обработчик нажатия на кнопку добавления новой карточки\r\n  const handleAddPlaceClick = () => {\r\n    //Открываем попап добавления новой карточки\r\n    setIsAddPlacePopupOpen(true);\r\n  };\r\n\r\n  //Обработчик нажатия на карточку\r\n  const handleCardClick = (card) => {\r\n    //Открываем попап картинки\r\n    setIsImagePopupOpen(true);\r\n    //Устанавливаем выбранную карточку как текущую, для отображения в попапе\r\n    setSelectedCard(card);\r\n  };\r\n\r\n  //Обработчик закрытия всех попапов\r\n  const closeAllPopups = () => {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsConfirmOpen(false);\r\n    setIsImagePopupOpen(false);\r\n  };\r\n\r\n  //Обработчик обновления данных пользователя\r\n  const handleUpdateUser = (data) => {\r\n    //Отправляем новые данные на сервер\r\n    setIsLoading(true);\r\n    apiObject\r\n      .setUserData(data)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n      })\r\n      .catch(console.log)\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  //Обработчик обновления аватара\r\n  const handleUpdateAvatar = (data) => {\r\n    //Отправляем новые данные\r\n    setIsLoading(true);\r\n    apiObject\r\n      .setAvatar(data)\r\n      .then((data) => {\r\n        setCurrentUser(data);\r\n        closeAllPopups();\r\n      })\r\n      .catch(console.log)\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  //функция обработчик установки/снятия лайка\r\n  const handleCardLike = (card) => {\r\n    //Снова проверяем, есть ли уже лайк на этой карточке\r\n    const isLiked = card.likes.some((item) => item._id === currentUser._id);\r\n\r\n    //Отправляем запрос в API и получаем обновленные данные карточки\r\n    apiObject\r\n      .toggleCardLike(card._id, !isLiked)\r\n      .then((newCard) => {\r\n        //формируем новый массив на основе имеющегося, подставляя в него новую карточку\r\n        const newCards = cards.map((item) => (item._id === card._id ? newCard : item));\r\n\r\n        //обновляем стейт\r\n        setCards(newCards);\r\n      })\r\n      .catch(console.log);\r\n  };\r\n\r\n  //функция обработчик удаления карточки\r\n  const handleCardDelete = () => {\r\n    //Отправляем запрос на удаление карточки\r\n    setIsLoading(true);\r\n    apiObject\r\n      .deleteCard(selectedCard._id)\r\n      .then(() => {\r\n        const newCards = cards.filter((item) => item._id !== selectedCard._id);\r\n        setCards(newCards);\r\n        closeAllPopups();\r\n      })\r\n      .catch(console.log)\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  //Обработчик добавления новой карточки\r\n  const handleAddPlace = (card) => {\r\n    //Отправляем запрос на добавление карточки\r\n    setIsLoading(true);\r\n    apiObject\r\n      .addCard(card)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch(console.log)\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  //Обработчик нажатия на кнопку удаления\r\n  const handleClickCardDelete = (card) => {\r\n    //Указываем текущую карточку, чтобы её удалить\r\n    setSelectedCard(card);\r\n    //Закрываем попап\r\n    setIsConfirmOpen(true);\r\n  };\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n        <Header logo={importedLogo} />\r\n        <Main\r\n          onEditProfile={handleEditProfileClick}\r\n          onAddPlace={handleAddPlaceClick}\r\n          onEditAvatar={handleEditAvatarClick}\r\n          cards={cards}\r\n          onCardClick={handleCardClick}\r\n          onCardLike={handleCardLike}\r\n          onCardDelete={handleClickCardDelete}\r\n        />\r\n        <Footer />\r\n        <AddPlacePopup\r\n          isOpen={isAddPlacePopupOpen}\r\n          isLoading={isLoading}\r\n          onClose={closeAllPopups}\r\n          onAddPlace={handleAddPlace}\r\n        />\r\n        <EditProfilePopup\r\n          isOpen={isEditProfilePopupOpen}\r\n          isLoading={isLoading}\r\n          onClose={closeAllPopups}\r\n          onUpdateUser={handleUpdateUser}\r\n        />\r\n        )\r\n        <EditAvatarPopup\r\n          isOpen={isEditAvatarPopupOpen}\r\n          isLoading={isLoading}\r\n          onClose={closeAllPopups}\r\n          onUpdateAvatar={handleUpdateAvatar}\r\n        />\r\n        <ImagePopup card={selectedCard} isOpen={isImagePopupOpen} onClose={closeAllPopups} />\r\n        <Confirm\r\n          isOpen={isConfirmOpen}\r\n          isLoading={isLoading}\r\n          onClose={closeAllPopups}\r\n          onSubmit={handleCardDelete}\r\n        />\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}